@page "/servers/add"
@attribute [StreamRendering]

<h3>Add Server</h3>
@inject NavigationManager NavigationManager

<EditForm Model="server" OnValidSubmit="Submit" FormName="ServerAddForm">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        <InputText id="name" class="form-control" @bind-Value="server.Name" />
    </div>
    <div class="mb-3">
        <label for="ipAddress" class="form-label">IP Address</label>
        <InputText id="ipAddress" class="form-control" @bind-Value="server.IPAddress" />
    </div>
    <div class="mb-3">
        <label for="status" class="form-label">Status</label>
        <InputSelect id="status" class="form-select" @bind-Value="server.Status">
            <option value="">Select Status</option>
            @foreach (var status in Enum.GetValues<ServerStatus>())
            {
                <option value="@status">@status</option>
            }
        </InputSelect>
    </div>
    <button type="submit" class="btn btn-primary">Add Server</button>
</EditForm>

@code {
    [SupplyParameterFromForm]
    private Server server { get; set; } = new Server();

    private void Submit()
    {
        if (server != null)
        {
            ServerRepository.Add(server);
        }        
        // Navigate back to the servers list or show a success message
        NavigationManager.NavigateTo("/servers");
    }
}
